{"mappings":"YAkCmD,IAA7CA,EAAO,CACXC,KAAMC,SAASC,eAAe,QAC9BC,YAAaF,SAASC,eAAe,gBA+Bd,SAAhBE,EAAQC,GACfC,QAAQC,MAAMF,GAE0BG,EAAzB,oB,CAiBjB,SAASA,EAAeC,GACtBV,EAAKI,YAAYO,UAAYD,C,CAjD/BV,EAAKC,KAAKW,iBAAiB,UAE3B,SAAkBC,GAChBA,EAAEC,iBACF,IAAMb,EAAOY,EAAEE,cACTC,EAAQf,EAAKgB,SAASC,KAAKF,MAAMG,OAID,IAAjCH,EAAO,QAvCGI,EAwCPJ,EAvCDK,MAAM,GAAiBC,OAPpB,oCAOU,YAAuBA,OAL7B,mCAKwB,OAAWA,OAANF,IAASG,MAAK,SAAAC,G,OAAOA,EAAIC,M,KAyCpBF,MAAxC,SAAAG,G,IAAGC,EAAQD,EAARC,SACP,GAAwB,IAApBA,EAASC,OAAc,MAAM,IAAIC,MAAM,WAE3C,OAAOF,EAASG,QACd,SAACpB,EAAQqB,G,OAmBsB,SAAjBL,G,IAAEM,EAAFN,EAAEM,MAAOC,EAATP,EAASO,OAAQC,EAAjBR,EAAiBQ,YAAaC,EAA9BT,EAA8BS,IAAKC,EAAnCV,EAAmCU,WACvD,MAAO,+DAGsBd,OADDU,EAAM,wCAEvBV,OADkBW,GAAU,GAAG,sBAETX,OADtBc,EAAW,4DAEZd,OADuBY,EAAY,oBAC/BZ,OAAJa,EAAI,oE,CA1BaE,CAAaN,GAAWrB,C,GAC7C,G,IAIHa,KAAKd,GACL6B,MAAMjC,GACNkC,SAAQ,W,OAAMtC,EAAKuC,O,IArDgB,IAAvBpB,C","sources":["src/js/04-http.js"],"sourcesContent":["// 6b11c596281f446484f7375d55e6b20d\n// GET https://newsapi.org/v2/everything?q=bitcoin&apiKey=6b11c596281f446484f7375d55e6b20d\n\nconst URL = 'https://newsapi.org/v2/everything';\n// const q = 'gpt';\nconst API_KEY = '6b11c596281f446484f7375d55e6b20d';\n\n// Функція, яка робить запити\n// .then(res => res.json()) розпарсили (перетворити на читабельний скрипт)\nfunction getNews(query) {\n  return fetch(`${URL}?apiKey=${API_KEY}&q=${query}`).then(res => res.json());\n}\n\n// getNews('gpt-3').then(result => console.log(result));\n// export { getNews };\n// export default { getNews };\n// назвать файл api.js и кинуть туда код выше\n\n// в script.js\n// import { getNews } from '';\n// import API from ''; импортується обєкт в якому є метод getNews\n// console.log(API);\n// API.getNews('gpt-3').then(result => console.log(result));\n// getNews('gpt-3').then(result => console.log(result));\n\n// 1. отримати refs\n// 2. повісити слухача на сабміт на форму\n// 3. отримати запит з інпуту і передати його у вигляді квері параметру на сервер\n// 4. перевірити відповіть серверу (якщо негативна відповіть - інформувати користувача) + невалідні дані\n// 5. отримаємо результат та перебираємо новий масив і створюємо з нього розмітку\n// 6. показуємо користувачу розмітку(innerHTML)\n// 7. очистити форму\n// 8. треба id якщо є видалення елементу чи фільтрація під час запиту\n\nconst refs = {\n  form: document.getElementById('form'),\n  newsWrapper: document.getElementById('newsWrapper'),\n};\n\nrefs.form.addEventListener('submit', onSubmit);\n\nfunction onSubmit(e) {\n  e.preventDefault();\n  const form = e.currentTarget;\n  const value = form.elements.news.value.trim();\n  // .trim() - прибираємо зайві пробіли\n  // console.log(e.currentTarget.elements.news.value);\n  // перевірка, якщо value нема, то робити запит не будемо\n  if (!value) return;\n  getNews(value)\n    // витягуємо аргументи з параметрів - деструктурізація\n    .then(({ articles }) => {\n      if (articles.length === 0) throw new Error('No data');\n\n      return articles.reduce(\n        (markup, article) => createMarkup(article) + markup,\n        ''\n      );\n      // викидаємо помилку через throw\n    })\n    .then(updateNewsList)\n    .catch(onError)\n    .finally(() => form.reset());\n}\n\n// функція яка оброблює помилки\n\nfunction onError(err) {\n  console.error(err);\n  // виводим користувачу повідомлення про помилку\n  updateNewsList('<p>Not found!</p>');\n}\n\n// функція яка малює розмітку + деструктурізацію\nfunction createMarkup({ title, author, description, url, urlToImage }) {\n  return `\n  <div class='article-card'>\n  <h2 class='article-title'>${title}</h2>\n  <h3 class='article-author'>${author || ''}</h3>\n  <img src=${urlToImage} class='article-img'>\n  <p class='article-description'>${description}</p>\n  <a href=${url} target='_blank' class='article-link'>Read more</a>\n  </div>\n  `;\n}\n\n// функція яка оновлює розмітку\nfunction updateNewsList(markup) {\n  refs.newsWrapper.innerHTML = markup;\n}\n"],"names":["$bce898d55e91c764$var$refs","form","document","getElementById","newsWrapper","$bce898d55e91c764$var$onError","err","console","error","$bce898d55e91c764$var$updateNewsList","markup","innerHTML","addEventListener","e","preventDefault","currentTarget","value","elements","news","trim","query","fetch","concat","then","res","json","param","articles","length","Error","reduce","article","title","author","description","url","urlToImage","$bce898d55e91c764$var$createMarkup","catch","finally","reset"],"version":3,"file":"04-pttp.59cefbb4.js.map"}